digraph {
graph [splines=polyline];
D0 [shape=box, style=rounded, label="begin"];
{rank = sink; D1 [shape=box, style=rounded, label="end"];}
D4 [shape=box, label="SWITCHTO(\"client\");"];
D6 [shape=box, label="log_file = fopen(\"client.log\", \"a\");"];
D8 [shape=diamond, label="(log_file == NULL)?"];
D13 [shape=box, label="prterr(fopen());"];
D15 [shape=box, label="erret;"];
D17 [shape=diamond, label="(create_socket() == -1)?"];
D22 [shape=box, label="close(client_socket_fd);"];
D24 [shape=box, label="erret;"];
D26 [shape=box, label="set_address_struct();"];
D28 [shape=box, label="pthread_mutex_init(&lock, NULL);"];
D30 [shape=box, label="printmenu();"];
D32 [shape=diamond, label="(!exit_flag)?"];
D37 [shape=box, label="int id1 = 0;"];
D39 [shape=box, label="prtlog(\"你想要进行什么操作：\");"];
D41 [shape=box, label="scanf(\"%d\", &id1);"];
D51 [shape=diamond, label="(id1) == 1?"];
D52 [shape=diamond, label="(id1) == 2?"];
D53 [shape=diamond, label="(id1) == 3?"];
D54 [shape=diamond, label="(id1) == 4?"];
D55 [shape=diamond, label="(id1) == 5?"];
D56 [shape=diamond, label="(id1) == 6?"];
D57 [shape=diamond, label="(id1) == 0?"];
D62 [shape=box, label="printmenu();"];
D64 [shape=box, label="break"];
D68 [shape=diamond, label="(connect_socket_and_addrstruct() == -1)?"];
D73 [shape=box, label="close(client_socket_fd);"];
D75 [shape=box, label="erret;"];
D77 [shape=diamond, label="(receive_guard() == -1)?"];
D82 [shape=box, label="close(client_socket_fd);"];
D84 [shape=box, label="erret;"];
D86 [shape=box, label="break"];
D90 [shape=diamond, label="(print_client_status() == -1)?"];
D95 [shape=box, label="close(client_socket_fd);"];
D97 [shape=box, label="erret;"];
D99 [shape=box, label="break"];
D103 [shape=box, label="char msg[kStringLength];"];
D105 [shape=box, label="prtlog(\"你想发送的内容：\");"];
D107 [shape=box, label="int c;"];
D109 [shape=diamond, label="((c = getchar()) != '\n' && c != EOF)?"];
D115 [shape=box, label="scanf(\"%[^\n]\", msg);"];
D117 [shape=box, label="prtlog(\"%s\", msg);"];
D119 [shape=diamond, label="(send_message_to_server(msg) == -1)?"];
D124 [shape=box, label="close(client_socket_fd);"];
D126 [shape=box, label="erret;"];
D128 [shape=box, label="break"];
D132 [shape=box, label="prtlog(\"请输入新端口号：\");"];
D134 [shape=box, label="int new_port_number = 0;"];
D136 [shape=box, label="scanf(\"%d\", &new_port_number);"];
D138 [shape=diamond, label="(new_port_number == port_number)?"];
D143 [shape=box, label="prtlog(\"\033[33m输入了相同的端口号，端口号未改变. \033[0m\");"];
D147 [shape=box, label="port_number = new_port_number;"];
D149 [shape=box, label="prtlog(\"\033[32m成功修改端口号为 %d. \033[0m\", port_number);"];
D151 [shape=box, label="close(client_socket_fd);"];
D153 [shape=box, label="prtlog(\"关闭了旧套接字. \");"];
D155 [shape=box, label="prtlog(\"尝试设置新的套接字：\");"];
D157 [shape=diamond, label="(create_socket() == -1)?"];
D162 [shape=box, label="close(client_socket_fd);"];
D164 [shape=box, label="erret;"];
D166 [shape=box, label="set_address_struct();"];
D168 [shape=box, label="prtlog(\"\033[32m重置客户端套接字成功. \033[0m\");"];
D170 [shape=box, label="break"];
D172 [shape=box, label="close(client_socket_fd);"];
D174 [shape=box, label="prtlog(\"已关闭客户端套接字. \");"];
D176 [shape=box, label="break"];
D178 [shape=box, label="close(client_socket_fd);"];
D180 [shape=box, label="prtlog(\"已关闭客户端套接字. \");"];
D182 [shape=box, label="exit_flag = 1;"];
D184 [shape=box, label="prtlog(\"正在退出 ...... \");"];
D186 [shape=diamond, label="(log_file != NULL)?"];
D191 [shape=box, label="fclose(log_file);"];
D193 [shape=box, label="break"];
D195 [shape=box, label="prtlog(\"\033[31m输入了非法操作序号，请重新输入. \033[0m\n\");"];
D197 [shape=box, label="break"];
D199 [shape=box, label="return 0;"];
D4 -> D6;
D6 -> D8;
D8:e -> D17:n [xlabel=N];
D13 -> D15;
D15 -> D17;
D17:e -> D26:n [xlabel=N];
D8:s -> D13:n [xlabel=Y];
D22 -> D24;
D24 -> D26;
D26 -> D28;
D17:s -> D22:n [xlabel=Y];
D28 -> D30;
D30 -> D32;
D32:e -> D199:n [xlabel=N];
D37 -> D39;
D99 -> D32;
D86 -> D32;
D128 -> D32;
D39 -> D41;
D170 -> D32;
D41 -> D51;
D176 -> D32;
D197 -> D32;
D90:e -> D99:n [xlabel=N];
D52:s -> D68:n [xlabel=Y];
D53:s -> D90:n [xlabel=Y];
D56:s -> D172:n [xlabel=Y];
D55:s -> D132:n [xlabel=Y];
D178 -> D180;
D195 -> D197;
D51:s -> D62:n [xlabel=Y];
D56:e -> D57:n [xlabel=N];
D55:e -> D56:n [xlabel=N];
D54:e -> D55:n [xlabel=N];
D53:e -> D54:n [xlabel=N];
D52:e -> D53:n [xlabel=N];
D51:e -> D52:n [xlabel=N];
D193 -> D32;
D68:e -> D77:n [xlabel=N];
D62 -> D64;
D73 -> D75;
D75 -> D77;
D77:e -> D86:n [xlabel=N];
D68:s -> D73:n [xlabel=Y];
D82 -> D84;
D84 -> D86;
D103 -> D105;
D77:s -> D82:n [xlabel=Y];
D95 -> D97;
D97 -> D99;
D90:s -> D95:n [xlabel=Y];
D105 -> D107;
D107 -> D109;
D109:e -> D115:n [xlabel=N];
D109:s -> D109:n [xlabel=Y];
D115 -> D117;
D117 -> D119;
D119:e -> D128:n [xlabel=N];
D124 -> D126;
D126 -> D128;
D132 -> D134;
D119:s -> D124:n [xlabel=Y];
D54:s -> D103:n [xlabel=Y];
D134 -> D136;
D136 -> D138;
D143 -> D151;
D147 -> D149;
D138:s -> D143:n [xlabel=Y];
D138:e -> D147:n [xlabel=N];
D149 -> D151;
D151 -> D153;
D153 -> D155;
D155 -> D157;
D157:e -> D166:n [xlabel=N];
D162 -> D164;
D164 -> D166;
D166 -> D168;
D157:s -> D162:n [xlabel=Y];
D168 -> D170;
D172 -> D174;
D174 -> D176;
D57:s -> D178:n [xlabel=Y];
D180 -> D182;
D182 -> D184;
D184 -> D186;
D186:e -> D193:n [xlabel=N];
D191 -> D193;
D57:e -> D195:n [xlabel=N];
D186:s -> D191:n [xlabel=Y];
D32:s -> D37:n [xlabel=Y];
D64 -> D32;
D199 -> D1;
D0 -> D4;
}
