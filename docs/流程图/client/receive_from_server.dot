digraph {
graph [splines=polyline];
D0 [shape=box, style=rounded, label="begin"];
{rank = sink; D1 [shape=box, style=rounded, label="end"];}
D4 [shape=box, label="bool is_username = 1;"];
D6 [shape=box, label="memset(received_message, 0, kStringLength);"];
D10 [shape=diamond, label="(!exit_flag)?"];
D13 [shape=box, label="int ret = recv(client_socket_fd, received_message, sizeof(received_message), 0);"];
D15 [shape=diamond, label="(ret < 0)?"];
D20 [shape=box, label="prterr(recv());"];
D22 [shape=box, label="close(client_socket_fd);"];
D24 [shape=box, label="return NULL;"];
D26 [shape=diamond, label="(ret == 0)?"];
D31 [shape=box, label="prtlog(\"\033[33m已断开与服务器的连接. \033[0m\");"];
D33 [shape=box, label="close(client_socket_fd);"];
D35 [shape=box, label="return NULL;"];
D37 [shape=diamond, label="(is_username)?"];
D42 [shape=box, label="pthread_mutex_lock(&lock);"];
D44 [shape=box, label="SWITCHTO(received_message);"];
D46 [shape=box, label="pthread_mutex_unlock(&lock);"];
D48 [shape=box, label="is_username = 0;"];
D52 [shape=box, label="pthread_mutex_lock(&lock);"];
D54 [shape=box, label="prtlog(\"%s\", received_message);"];
D56 [shape=box, label="SWITCHTO(name);"];
D58 [shape=box, label="pthread_mutex_unlock(&lock);"];
D60 [shape=box, label="is_username = 1;"];
D62 [shape=box, label="return NULL;"];
D4 -> D6;
D10:e -> D62:n [xlabel=N];
D6 -> D13;
D13 -> D15;
D26:e -> D37:n [xlabel=N];
D20 -> D22;
D22 -> D24;
D15:e -> D26:n [xlabel=N];
D24 -> D1;
D31 -> D33;
D26:s -> D31:n [xlabel=Y];
D33 -> D35;
D35 -> D1;
D15:s -> D20:n [xlabel=Y];
D42 -> D44;
D44 -> D46;
D46 -> D48;
D48 -> D10;
D52 -> D54;
D37:s -> D42:n [xlabel=Y];
D37:e -> D52:n [xlabel=N];
D54 -> D56;
D56 -> D58;
D58 -> D60;
D60 -> D10;
D10:s -> D13:n [xlabel=Y];
D62 -> D1;
D0 -> D4;
}
