digraph {
graph [splines=polyline];
D0 [shape=box, style=rounded, label="begin"];
{rank = sink; D1 [shape=box, style=rounded, label="end"];}
D4 [shape=box, label="SWITCHTO(\"server\");"];
D6 [shape=box, label="log_file = fopen(\"server.log\", \"a\");"];
D8 [shape=diamond, label="(log_file == NULL)?"];
D13 [shape=box, label="prterr(fopen());"];
D15 [shape=box, label="erret;"];
D17 [shape=diamond, label="(create_socket() == -1)?"];
D22 [shape=box, label="close(server_socket_fd);"];
D24 [shape=box, label="erret;"];
D26 [shape=box, label="set_address_struct();"];
D28 [shape=diamond, label="(bind_socket_and_addrstruct() == -1)?"];
D33 [shape=box, label="close(server_socket_fd);"];
D35 [shape=box, label="erret;"];
D37 [shape=box, label="printmenu();"];
D39 [shape=box, label="bool exit_flag = 0;"];
D41 [shape=diamond, label="(!exit_flag)?"];
D46 [shape=box, label="int id1 = 0;"];
D48 [shape=box, label="prtlog(\"你想要进行什么操作：\");"];
D50 [shape=box, label="scanf(\"%d\", &id1);"];
D60 [shape=diamond, label="(id1) == 1?"];
D61 [shape=diamond, label="(id1) == 2?"];
D62 [shape=diamond, label="(id1) == 3?"];
D63 [shape=diamond, label="(id1) == 4?"];
D64 [shape=diamond, label="(id1) == 5?"];
D65 [shape=diamond, label="(id1) == 6?"];
D66 [shape=diamond, label="(id1) == 0?"];
D71 [shape=box, label="printmenu();"];
D73 [shape=box, label="break"];
D77 [shape=diamond, label="(listen_socket() == -1)?"];
D82 [shape=box, label="close(server_socket_fd);"];
D84 [shape=box, label="erret;"];
D86 [shape=diamond, label="(accept_client_connection() < 0)?"];
D91 [shape=box, label="close(server_socket_fd);"];
D93 [shape=box, label="erret;"];
D95 [shape=box, label="break"];
D99 [shape=diamond, label="(print_server_status() == -1)?"];
D104 [shape=box, label="close(server_socket_fd);"];
D106 [shape=box, label="erret;"];
D108 [shape=box, label="break"];
D112 [shape=box, label="bool is_success = 1;"];
D116 [shape=diamond, label="i < client_count?"];
D117 [shape=box, label="int i = 0;"];
D118 [shape=box, label="i++"];
D121 [shape=box, label="is_success = is_success && disconnect_client(client_list[i].fd);"];
D123 [shape=diamond, label="(is_success)?"];
D128 [shape=box, label="prtlog(\"成功断开所有客户端的连接. \");"];
D132 [shape=box, label="prtlog(\"断开连接异常. \");"];
D134 [shape=box, label="break"];
D138 [shape=box, label="prtlog(\"请输入新端口号：\");"];
D140 [shape=box, label="int new_port_number = 0;"];
D142 [shape=box, label="scanf(\"%d\", &new_port_number);"];
D144 [shape=diamond, label="(new_port_number == port_number)?"];
D149 [shape=box, label="prtlog(\"\033[33m输入了相同的端口号，端口号未改变. \033[0m\");"];
D153 [shape=box, label="port_number = new_port_number;"];
D155 [shape=box, label="prtlog(\"\033[32m成功修改端口号为 %d. \033[0m\", port_number);"];
D157 [shape=box, label="close(server_socket_fd);"];
D159 [shape=box, label="prtlog(\"关闭了旧套接字. \");"];
D161 [shape=box, label="prtlog(\"尝试设置新的套接字：\");"];
D163 [shape=diamond, label="(create_socket() == -1)?"];
D168 [shape=box, label="close(server_socket_fd);"];
D170 [shape=box, label="erret;"];
D172 [shape=box, label="set_address_struct();"];
D174 [shape=diamond, label="(bind_socket_and_addrstruct() == -1)?"];
D179 [shape=box, label="close(server_socket_fd);"];
D181 [shape=box, label="erret;"];
D183 [shape=box, label="prtlog(\"\033[32m重置服务端套接字成功. \033[0m\");"];
D185 [shape=box, label="break"];
D187 [shape=box, label="close(server_socket_fd);"];
D189 [shape=box, label="prtlog(\"已关闭服务器套接字. \");"];
D191 [shape=box, label="break"];
D193 [shape=box, label="close(server_socket_fd);"];
D195 [shape=box, label="prtlog(\"已关闭服务器套接字. \");"];
D197 [shape=box, label="exit_flag = 1;"];
D199 [shape=box, label="prtlog(\"正在退出 ...... \");"];
D201 [shape=diamond, label="(log_file != NULL)?"];
D206 [shape=box, label="fclose(log_file);"];
D208 [shape=box, label="break"];
D210 [shape=box, label="prtlog(\"\033[31m输入了非法操作序号，请重新输入. \033[0m\n\");"];
D212 [shape=box, label="break"];
D214 [shape=box, label="return 0;"];
D4 -> D6;
D6 -> D8;
D8:e -> D17:n [xlabel=N];
D13 -> D15;
D15 -> D17;
D17:e -> D26:n [xlabel=N];
D8:s -> D13:n [xlabel=Y];
D22 -> D24;
D24 -> D26;
D26 -> D28;
D17:s -> D22:n [xlabel=Y];
D28:e -> D37:n [xlabel=N];
D33 -> D35;
D35 -> D37;
D37 -> D39;
D28:s -> D33:n [xlabel=Y];
D39 -> D41;
D41:e -> D214:n [xlabel=N];
D46 -> D48;
D108 -> D41;
D95 -> D41;
D134 -> D41;
D48 -> D50;
D185 -> D41;
D50 -> D60;
D191 -> D41;
D212 -> D41;
D99:e -> D108:n [xlabel=N];
D61:s -> D77:n [xlabel=Y];
D62:s -> D99:n [xlabel=Y];
D63:s -> D112:n [xlabel=Y];
D64:s -> D138:n [xlabel=Y];
D193 -> D195;
D210 -> D212;
D60:s -> D71:n [xlabel=Y];
D65:e -> D66:n [xlabel=N];
D64:e -> D65:n [xlabel=N];
D63:e -> D64:n [xlabel=N];
D62:e -> D63:n [xlabel=N];
D61:e -> D62:n [xlabel=N];
D60:e -> D61:n [xlabel=N];
D208 -> D41;
D77:e -> D86:n [xlabel=N];
D71 -> D73;
D82 -> D84;
D84 -> D86;
D86:e -> D95:n [xlabel=N];
D77:s -> D82:n [xlabel=Y];
D91 -> D93;
D93 -> D95;
D112 -> D117;
D86:s -> D91:n [xlabel=Y];
D104 -> D106;
D106 -> D108;
D138 -> D140;
D99:s -> D104:n [xlabel=Y];
D116:e -> D123:n [xlabel=N];
D117 -> D116;
D121 -> D118;
D118 -> D116;
D116:s -> D121:n [xlabel=Y];
D128 -> D134;
D132 -> D134;
D123:s -> D128:n [xlabel=Y];
D123:e -> D132:n [xlabel=N];
D65:s -> D187:n [xlabel=Y];
D140 -> D142;
D142 -> D144;
D149 -> D157;
D153 -> D155;
D144:s -> D149:n [xlabel=Y];
D144:e -> D153:n [xlabel=N];
D155 -> D157;
D157 -> D159;
D159 -> D161;
D161 -> D163;
D163:e -> D172:n [xlabel=N];
D168 -> D170;
D170 -> D172;
D172 -> D174;
D163:s -> D168:n [xlabel=Y];
D174:e -> D183:n [xlabel=N];
D179 -> D181;
D181 -> D183;
D183 -> D185;
D174:s -> D179:n [xlabel=Y];
D187 -> D189;
D189 -> D191;
D66:s -> D193:n [xlabel=Y];
D195 -> D197;
D197 -> D199;
D199 -> D201;
D201:e -> D208:n [xlabel=N];
D206 -> D208;
D66:e -> D210:n [xlabel=N];
D201:s -> D206:n [xlabel=Y];
D41:s -> D46:n [xlabel=Y];
D73 -> D41;
D214 -> D1;
D0 -> D4;
}
